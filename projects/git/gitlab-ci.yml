---
variables:
  DOCKER_CONTENT_TRUST: 1

.common:
  only:
    - /^hji-/
  artifacts:
    paths:
      - t/test-results
    when: on_failure
  script:
    - ${CI_SRC}/ci run-pipeline --notify --trigger

test:alpine-3.11:
  image: ${CI_REGISTRY_IMAGE}/git:alpine-3.11
  extends: .common

test:centos-7:
  image: ${CI_REGISTRY_IMAGE}/git:centos-7
  extends: .common

test:fedora-31:
  image: ${CI_REGISTRY_IMAGE}/git:fedora-31
  extends: .common

test:ubuntu-16.04:
  image: ${CI_REGISTRY_IMAGE}/git:ubuntu-16.04
  extends: .common

test:ubuntu-19.10:
  image: ${CI_REGISTRY_IMAGE}/git:ubuntu-19.10
  extends: .common
